{"name":"complie","slug":"complie","count":1,"postlist":[{"title":"动态库加载","slug":"动态库加载","date":"2024-06-27T14:04:27.000Z","updated":"2024-07-02T11:41:14.541Z","comments":true,"path":"api/articles/动态库加载.json","excerpt":"","keywords":null,"cover":null,"content":"<p>一般组件提供动态库时会配套提供头文件定义动态库的一些基本类型和可用函数，加载动态库有方式：</p>\n<ul>\n<li>使用dlopen在程序运行时加载.so动态库，编译时无需链接动态库，不会对动态库产生依赖，需要时到自定义路径中加载动态库</li>\n<li>引入头文件，直接在编译时链接动态库，会使生成的二进制文件对此动态库产生依赖，若在动态库加载路径中找不到此动态库无法运行二进制文件</li>\n</ul>\n<p>动态加载关键函数 头文件：dlfcn.h</p>\n<ul>\n<li>dlopen 打开动态链接库</li>\n<li>dlclose 关闭动态链接库</li>\n<li>dlsym 加载某个函数，将函数指针指向动态库中符合函数名的函数</li>\n<li>dlerror 获取加载动态库函数遇到的错误信息</li>\n</ul>\n<p><a href=\"https://blog.csdn.net/lanhuazui10/article/details/117849995\">https://blog.csdn.net/lanhuazui10/article/details/117849995</a></p>\n<h3 id=\"相关系统配置（存在依赖需要配置）\"><a href=\"#相关系统配置（存在依赖需要配置）\" class=\"headerlink\" title=\"相关系统配置（存在依赖需要配置）\"></a>相关系统配置（存在依赖需要配置）</h3><p>&#x2F;etc&#x2F;ld.so.conf文件配置加载动态库文件目录 &#x2F;&#x2F; 系统级，赋root特殊权限的二进制依赖动态库需配置此文件添加动态库目录或将所需动态库移至&#x2F;lib</p>\n<p>编辑ld.so.conf后需执行ldconfig（需root操作），刷新&#x2F;etc&#x2F;ld.so.cache文件</p>\n<p>通过环境变量LD_LIBRARY_PATH配置用户级动态库文件目录，不同用户可使用不同动态库</p>\n<h3 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h3><p>ldd命令查看二进制文件的动态库依赖</p>\n<p>ldconfig刷新系统ld.so.cache缓存</p>\n<h3 id=\"静态库libxxx-a-vs-动态库libxxx-so\"><a href=\"#静态库libxxx-a-vs-动态库libxxx-so\" class=\"headerlink\" title=\"静态库libxxx.a vs 动态库libxxx.so\"></a>静态库libxxx.a vs 动态库libxxx.so</h3><p>静态库会与目标文件一起链接为可执行文件，修改静态库需要重新编译二进制</p>\n<p>把一些函数的链接推迟到运行时期，可单独更新动态库</p>\n<p><a href=\"https://blog.csdn.net/weixin_51483516/article/details/120837316\">https://blog.csdn.net/weixin_51483516/article/details/120837316</a></p>\n<p><a href=\"https://www.runoob.com/w3cnote/cpp-static-library-and-dynamic-library.html\">https://www.runoob.com/w3cnote/cpp-static-library-and-dynamic-library.html</a></p>\n","text":"一般组件提供动态库时会配套提供头文件定义动态库的一些基本类型和可用函数，加载动态库有方式：使用dlopen在程序运行时加载.so动态库，编译时无需链接动态库，不会对动态库产生依赖，需要时到自定义路径中加载动态库引入头文件，直接在编译时链接动态库，会使生成的二进制文件对此动态库产生","link":"","raw":null,"photos":[],"categories":[{"name":"complie","slug":"complie","count":1,"path":"api/categories/complie.json"}],"tags":[]}]}